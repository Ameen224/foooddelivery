<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Venture Products</title>
  <link rel="stylesheet" href="/css/bootstrap.css">
  <link href="/css/font-awesome.min.css" rel="stylesheet">
  <style>
    body { font-family: 'Arial', sans-serif; background: linear-gradient(135deg, #f9d423, #ff4e50); margin: 0; padding: 0; color: #343a40; }
    .navbar { background-color: rgba(255,255,255,0.9); padding: 15px 30px; display: flex; justify-content: center; align-items: center; box-shadow: 0 4px 8px rgba(0,0,0,0.1); border-radius: 0 0 15px 15px; }
    .navbar .nav-buttons { display: flex; gap: 20px; }
    .navbar .btn-warning:first-child {margin-right: 20px;  }
    .navbar button, .navbar a { background-color: #ffcc00; border: none; padding: 10px 20px; font-size: 1rem; cursor: pointer; border-radius: 8px; font-weight: bold; transition: background-color 0.3s ease; color: #343a40; text-decoration: none; }
    .navbar button:hover, .navbar a:hover { background-color: #e6b800; }
    .product-container { margin: 40px auto; max-width: 1200px; display: flex; flex-wrap: wrap; justify-content: space-evenly; gap: 30px; padding: 20px; }
    .product-card { background-color: rgba(255,255,255,0.95); border-radius: 12px; width: 300px; padding: 20px; box-shadow: 0 6px 15px rgba(0,0,0,0.1); transition: transform 0.3s ease, box-shadow 0.3s ease; text-align: center; overflow: hidden; }
    .product-card:hover { transform: translateY(-10px); box-shadow: 0 12px 25px rgba(0,0,0,0.2); }
    .product-card img { width: 100%; height: 200px; object-fit: cover; border-radius: 8px; margin-bottom: 15px; }
    .product-card h5 { margin: 10px 0; font-size: 1.3rem; color: #343a40; }
    .product-card p { color: #6c757d; font-size: 1rem; margin: 5px 0; }
    .btn-delete { background-color: #dc3545; color: white; border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer; font-size: 1rem; transition: background-color 0.3s ease; margin-top: 15px; }
    .btn-delete:hover { background-color: #c82333; }
    .btn-edit-price { background-color: #28a745; color: white; border: none; padding: 10px 15px; border-radius: 8px; cursor: pointer; font-size: 1rem; transition: background-color 0.3s ease; margin-top: 10px; }
    .btn-edit-price:hover { background-color: #218838; }
    .add-product-column { margin-top: 40px; text-align: center; }
    .btn-add-product { background-color: #ffcc00; color: #343a40; border: none; padding: 12px 30px; border-radius: 8px; cursor: pointer; font-size: 1.2rem; font-weight: bold; transition: background-color 0.3s ease; }
    .btn-add-product:hover { background-color: #e6b800; }
    .btn-add-product {
  background: linear-gradient(135deg, #ffcc00, #ffb300);
  color: #343a40;
  border: none;
  padding: 12px 30px;
  border-radius: 8px;
  cursor: pointer;
  font-size: 1.2rem;
  font-weight: bold;
  transition: all 0.3s ease;
  display: inline-block;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

.btn-add-product:hover {
  background: linear-gradient(135deg, #e6b800, #d39e00);
  transform: translateY(-2px);
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
}

  </style>
</head>
<body>
  <nav class="navbar">
    <a href="#" class="btn btn-warning">Orders</a>
    <a href="/vendor/profile" class="btn btn-warning">Profile</a>
  </nav>
  <div class="product-container" id="product-container"></div>
  <div class="text-center mt-4">
    <button class="btn-add-product" onclick="addProduct()">âž• Add More Products</button>
  </div>
  <script>
    function addProduct() {
      window.location.href = "/vendor/add";
    }
  
    async function loadProducts() {
      try {
        const options = {
          method: 'GET',
          headers: {
            'Authorization': `Bearer ${currentAccessToken}`,  // Add your current token here
          },
        };
        const response = await handleRequest('/api/products', options);  // Use handleRequest to fetch products
    
        if (response.ok) {
          const products = await response.json();
          const productContainer = document.getElementById('product-container');
          productContainer.innerHTML = '';
          products.forEach(product => {
            const productCard = document.createElement('div');
            productCard.classList.add('product-card');
            productCard.innerHTML = `
              <img src="${product.image_url}" alt="${product.name}">
              <h5>${product.name}</h5>
              <p>${product.description}</p> <!-- Use regular JS syntax here -->
              <p>Price: $${product.price}</p>
              <button class="btn btn-danger" onclick="deleteProduct('${product._id}')">Delete</button>
              <button class="btn btn-success" onclick="editPrice('${product._id}')">Edit Price</button>
            `;
            productContainer.appendChild(productCard);
          });
        } else {
          console.error("Failed to fetch products.");
        }
      } catch (error) {
        console.error('Error fetching products:', error);
      }
    }
  
    loadProducts();
  </script>  
</body>
</html>
